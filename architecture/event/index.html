<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Event Subsystem - STABILA Documentation</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Event Subsystem";
    var mkdocs_page_input_path = "architecture/event.md";
    var mkdocs_page_url = "/documentation-en/architecture/event/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> STABILA Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Introduction</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../introduction/">Repository</a>
                </li>
                <li class="">
                    
    <a class="" href="../../introduction/dpos/">DPoS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../introduction/overview/">Overview</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../api/http/">HTTP API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/rpc/">RPC API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mechanism & Algorithm</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/sr/">SR and Committee</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/trc10/">TRC-10</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/account/">Account Model</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/resource/">Resource Model</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/dex/">Decentralized Exchange</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/multi-signatures/">Multi-Signature</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/shielded-TRC20-contract/">Shielded TRC20 Contract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/system-contracts/">System Contracts</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Architecture</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../network/">Network</a>
                </li>
                <li class="">
                    
    <a class="" href="../database/">Database</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Event Subsystem</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#stabila-event-subsystem">Stabila Event Subsystem</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
        
            <li><a class="toctree-l4" href="#new-features">New Features</a></li>
        
            <li><a class="toctree-l4" href="#github-project">Github project</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Smart Contract</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../contracts/svm/">SVM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/compiler/">Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/contract/">Contract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/trc20/">TRC-20</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../developers/official-public-nodes/">Official Public Nodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/deployment/">Deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/run-in-idea/">Run FullNode in IDEA</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/litefullnode/">Run Lite FullNode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/archive-manifest/">Leveldb Startup Optimization Plugins</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/resources/">Resources</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/contribution/">Contribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/incentives/">Incentive Policy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/java-stabila/">Java-Stabila</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/tips/">TIPs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/advanced-configuration/">Advanced Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/gpg/">Contact Us (GPG Key)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Clients</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../clients/wallet-cli/">Wallet-cli</a>
                </li>
                <li class="">
                    
    <a class="" href="../../clients/stabila-grid/">StabilaGrid</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Releases</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../releases/">Binary Integrity Check</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../glossary/">Glossary</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">STABILA Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Architecture &raquo;</li>
        
      
    
    <li>Event Subsystem</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/stabilaprotocol/documentation-en/edit/master/docs/architecture/event.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="stabila-event-subsystem">Stabila Event Subsystem<a class="headerlink" href="#stabila-event-subsystem" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The TIP: <a href="https://github.com/stabilaprotocol/TIPs/blob/master/tip-12.md">TIP-12: Stabila event subscribes model</a>.</p>
<p>STABILA Event Subscription supports 4 types of event:</p>
<h3 id="transaction-event">Transaction Event<a class="headerlink" href="#transaction-event" title="Permanent link">&para;</a></h3>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><span class="n">transactionId</span><span class="o">:</span> <span class="n">transaction</span> <span class="n">hash</span>
<span class="n">blockHash</span><span class="o">:</span> <span class="n">block</span> <span class="n">hash</span>
<span class="n">blockNumber</span><span class="o">:</span> <span class="n">block</span> <span class="n">number</span>
<span class="n">ucrUsage</span><span class="o">:</span> <span class="n">ucr</span> <span class="n">usage</span>
<span class="n">ucrFee</span><span class="o">:</span> <span class="n">ucr</span> <span class="n">fee</span>
<span class="n">originUcrUsage</span><span class="o">:</span> <span class="n">origin</span> <span class="n">ucr</span> <span class="n">usage</span>
<span class="n">ucrUsageTotal</span><span class="o">:</span> <span class="n">total</span> <span class="n">ucr</span> <span class="n">usage</span> <span class="n">total</span>
</pre></div>


<h3 id="block-event">Block Event<a class="headerlink" href="#block-event" title="Permanent link">&para;</a></h3>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><span class="n">blockHash</span><span class="o">:</span> <span class="n">block</span> <span class="n">hash</span>
<span class="n">blockNumber</span><span class="o">:</span> <span class="n">block</span> <span class="n">number</span>
<span class="n">transactionSize</span><span class="o">:</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">transactions</span> <span class="k">in</span> <span class="n">a</span> <span class="n">block</span>
<span class="n">latestSolidifiedBlockNumber</span><span class="o">:</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">solidified</span> <span class="n">block</span> <span class="n">number</span>
<span class="n">transactionList</span><span class="o">:</span> <span class="n">the</span> <span class="n">transactions</span> <span class="n">hash</span> <span class="n">list</span>
</pre></div>


<h3 id="contract-event">Contract Event<a class="headerlink" href="#contract-event" title="Permanent link">&para;</a></h3>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><span class="n">transactionId</span><span class="o">:</span> <span class="n">transaction</span> <span class="n">id</span>
<span class="n">contractAddress</span><span class="o">:</span> <span class="n">contract</span> <span class="n">address</span>
<span class="n">callerAddress</span><span class="o">:</span> <span class="n">contract</span> <span class="n">caller</span> <span class="n">address</span>
<span class="n">blockNumber</span><span class="o">:</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">the</span> <span class="n">block</span> <span class="n">contract</span> <span class="n">related</span> <span class="n">events</span> <span class="n">recorded</span>
<span class="n">blockTimestamp</span><span class="o">:</span> <span class="n">the</span> <span class="n">block</span> <span class="n">time</span> <span class="n">stamp</span>
<span class="n">eventSignature</span><span class="o">:</span> <span class="n">event</span> <span class="n">signature</span>
<span class="n">topicMap</span><span class="o">:</span> <span class="n">the</span> <span class="n">map</span> <span class="n">of</span> <span class="n">topic</span> <span class="k">in</span> <span class="n">solidity</span> <span class="n">language</span>
<span class="n">data</span><span class="o">:</span> <span class="n">the</span> <span class="n">data</span> <span class="n">information</span> <span class="k">in</span> <span class="n">solidity</span> <span class="n">language</span>
<span class="n">removed</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span> <span class="n">means</span> <span class="n">the</span> <span class="n">log</span> <span class="k">is</span> <span class="n">removed</span>
</pre></div>


<h3 id="contract-log-event">Contract Log Event<a class="headerlink" href="#contract-log-event" title="Permanent link">&para;</a></h3>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><span class="n">transactionId</span><span class="o">:</span> <span class="n">transaction</span> <span class="n">hash</span>
<span class="n">contractAddress</span><span class="o">:</span> <span class="n">contract</span> <span class="n">address</span>
<span class="n">callerAddress</span><span class="o">:</span> <span class="n">contract</span> <span class="n">caller</span> <span class="n">address</span>
<span class="n">blockNumber</span><span class="o">:</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">the</span> <span class="n">block</span> <span class="n">contract</span> <span class="n">related</span> <span class="n">events</span> <span class="n">recorded</span>
<span class="n">blockTimestamp</span><span class="o">:</span> <span class="n">the</span> <span class="n">block</span> <span class="n">time</span> <span class="n">stamp</span>
<span class="n">contractTopics</span><span class="o">:</span> <span class="n">the</span> <span class="n">list</span> <span class="n">of</span> <span class="n">topic</span> <span class="k">in</span> <span class="n">solidity</span> <span class="n">language</span>
<span class="n">data</span><span class="o">:</span> <span class="n">the</span> <span class="n">data</span> <span class="n">information</span> <span class="k">in</span> <span class="n">solidity</span> <span class="n">language</span>
<span class="n">removed</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span> <span class="n">means</span> <span class="n">the</span> <span class="n">log</span> <span class="k">is</span> <span class="n">removed</span>
</pre></div>


<p>Contract Event and Contract Log Even support event filter function which includes:</p>
<div class="codehilite"><pre><span></span><span class="n">fromBlock</span><span class="o">:</span> <span class="n">the</span> <span class="n">start</span> <span class="n">block</span> <span class="n">number</span>
<span class="n">toBlock</span><span class="o">:</span> <span class="n">the</span> <span class="n">end</span> <span class="n">block</span> <span class="n">number</span>
<span class="n">contractAddress</span><span class="o">:</span> <span class="n">contract</span> <span class="n">adsresses</span> <span class="n">list</span>
<span class="n">contractTopics</span><span class="o">:</span> <span class="n">contract</span> <span class="n">topics</span> <span class="n">list</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Historical data query is not supported.</p>
</div>
<h2 id="new-features">New Features<a class="headerlink" href="#new-features" title="Permanent link">&para;</a></h2>
<ol>
<li>Supporting event plug-ins, kafka &amp; mongodb plug-ins have been released, developers can also customize their own plug-ins according to their own needs.</li>
<li>Supporting subscription of chain data, such as block, transaction, contract log, contract event and so on. For transaction events, developers can get information such as internal transactions, contract info and so on; for contract events, developers could configure the contract addresses list or contract topic list to receive the specified events, and event subscription has a very low latency. The deployed fullnode can receive event information immediately after the contract is executed.</li>
<li>Event query service stabila-eventquery, online Event query service provided. Developers can query trigger information in the last seven days through https, and the query address is <a href="https://api.stabilaex.io">https://api.stabilaex.io</a>.</li>
</ol>
<h2 id="github-project">Github project<a class="headerlink" href="#github-project" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/stabilaprotocol/event-plugin">stabilaprotocol/event-plugin</a></li>
<li><a href="https://github.com/stabilaprotocol/stabila-eventquery">stabilaprotocol/stabila-eventquery</a></li>
</ul>
<h3 id="event-plugin">Event plugin<a class="headerlink" href="#event-plugin" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../developers/deployment/#kafka">Kafka deployment</a></li>
<li><a href="../../developers/deployment/#mongo">MongoDB deployment</a></li>
</ul>
<h3 id="event-query">Event query<a class="headerlink" href="#event-query" title="Permanent link">&para;</a></h3>
<p>Stabila Event Query Service</p>
<p>StabilaEventQuery is implemented with Stabila's new event subscribe model. It uses same query interface with Stabila-Grid. Users can also subscribe block trigger, transaction trigger, contract log trigger, and contract event trigger. StabilaEvent is independent of a particular branch of java-stabila, the new event subscribes model will be released on version 3.5 of java-stabila.</p>
<p>For more information of stabila event subscribe model, please refer to <a href="https://github.com/stabilaprotocol/TIPs/issues/12">TIP-12</a>.</p>
<ul>
<li><a href="https://stabilaprotocol.github.io/documentation-en/developers/deployment/#event-subscribe-plugin-deployment">Event query deployment</a></li>
<li><a href="https://github.com/stabilaprotocol/documentation-en/tree/master/docs_without_index/plugin/event-query-http.md">Event query HTTP API</a></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../contracts/svm/" class="btn btn-neutral float-right" title="SVM">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../database/" class="btn btn-neutral" title="Database"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/stabilaprotocol/documentation-en/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../database/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../contracts/svm/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
