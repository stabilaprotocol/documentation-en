<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Overview - STABILA Documentation</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Overview";
    var mkdocs_page_input_path = "introduction/overview.md";
    var mkdocs_page_url = "/documentation-en/introduction/overview/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> STABILA Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Introduction</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Repository</a>
                </li>
                <li class="">
                    
    <a class="" href="../dpos/">DPoS</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Overview</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#overview">Overview</a></li>
    

    <li class="toctree-l3"><a href="#1-project-repository">1. Project Repository</a></li>
    

    <li class="toctree-l3"><a href="#2-srs-and-committee">2. SRs and Committee</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#21-how-to-become-a-governor">2.1 How to Become a Governor</a></li>
        
            <li><a class="toctree-l4" href="#22-governors-election">2.2 Governors Election</a></li>
        
            <li><a class="toctree-l4" href="#23-reward-for-governors">2.3 Reward for Governors</a></li>
        
            <li><a class="toctree-l4" href="#24-committee">2.4 Committee</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#3-account-model">3. Account Model</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#31-introduction">3.1 Introduction</a></li>
        
            <li><a class="toctree-l4" href="#32-how-to-create-an-account">3.2 How to Create an Account</a></li>
        
            <li><a class="toctree-l4" href="#33-key-pair-generation-algorithm">3.3 Key-pair Generation Algorithm</a></li>
        
            <li><a class="toctree-l4" href="#34-address-format">3.4 Address Format</a></li>
        
            <li><a class="toctree-l4" href="#35-signature">3.5 Signature</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#4-network-node">4. Network Node</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#41-governor">4.1 Governor</a></li>
        
            <li><a class="toctree-l4" href="#42-fullnode">4.2 FullNode</a></li>
        
            <li><a class="toctree-l4" href="#43-soliditynode">4.3 SolidityNode</a></li>
        
            <li><a class="toctree-l4" href="#44-stabila-network-instructure">4.4 STABILA Network Instructure</a></li>
        
            <li><a class="toctree-l4" href="#45-fullnode-and-soliditynode-fast-deployment">4.5 FullNode and SolidityNode Fast Deployment</a></li>
        
            <li><a class="toctree-l4" href="#46-mainnet-privatenet">4.6 MainNet, PrivateNet</a></li>
        
            <li><a class="toctree-l4" href="#47-db-engine">4.7 DB Engine</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#5-smart-contract">5. Smart Contract</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#51-stabila-smart-contract-introduction">5.1 STABILA Smart Contract Introduction</a></li>
        
            <li><a class="toctree-l4" href="#52-stabila-smart-contract-features">5.2 STABILA Smart Contract Features</a></li>
        
            <li><a class="toctree-l4" href="#53-ucr-introduction">5.3 Ucr Introduction</a></li>
        
            <li><a class="toctree-l4" href="#54-smart-contract-development-tool">5.4 Smart Contract Development Tool</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#6-src-10-token-introduction">6. SRC-10 Token Introduction</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#61-how-to-issue-a-src-10-token">6.1 How to Issue a SRC-10 Token</a></li>
        
            <li><a class="toctree-l4" href="#62-participate-src-10-token">6.2 Participate SRC-10 Token</a></li>
        
            <li><a class="toctree-l4" href="#63-src-10-token-transfer">6.3 SRC-10 Token Transfer</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#7-resource-model">7. Resource Model</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#71-resource-model-introduction">7.1 Resource Model Introduction</a></li>
        
            <li><a class="toctree-l4" href="#72-bandwidth-points">7.2 Bandwidth Points</a></li>
        
            <li><a class="toctree-l4" href="#721-how-to-get-bandwidth-points">7.2.1 How to Get Bandwidth Points</a></li>
        
            <li><a class="toctree-l4" href="#73-ucr">7.3 Ucr</a></li>
        
            <li><a class="toctree-l4" href="#74-resource-delegation">7.4 Resource Delegation</a></li>
        
            <li><a class="toctree-l4" href="#75-other-fees">7.5 Other Fees</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#8-wallet-introduction">8. Wallet Introduction</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#81-wallet-cli-introduction">8.1 wallet-cli Introduction</a></li>
        
            <li><a class="toctree-l4" href="#82-get-transaction-id">8.2 Get Transaction ID</a></li>
        
            <li><a class="toctree-l4" href="#83-get-block-id">8.3 Get Block ID</a></li>
        
            <li><a class="toctree-l4" href="#84-how-to-build-a-transaction-locally">8.4 How to Build a Transaction Locally</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../api/http/">HTTP API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/rpc/">RPC API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mechanism & Algorithm</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/gov/">GOV and Committee</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/src10/">SRC-10</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/account/">Account Model</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/resource/">Resource Model</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/dex/">Decentralized Exchange</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/multi-signatures/">Multi-Signature</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/shielded-SRC20-contract/">Shielded SRC20 Contract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/system-contracts/">System Contracts</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Architecture</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../architecture/network/">Network</a>
                </li>
                <li class="">
                    
    <a class="" href="../../architecture/database/">Database</a>
                </li>
                <li class="">
                    
    <a class="" href="../../architecture/event/">Event Subsystem</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Smart Contract</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../contracts/svm/">SVM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/compiler/">Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/contract/">Contract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contracts/src20/">SRC-20</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../developers/official-public-nodes/">Official Public Nodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/deployment/">Deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/run-in-idea/">Run FullNode in IDEA</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/litefullnode/">Run Lite FullNode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/resources/">Resources</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/contribution/">Contribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/java-stabila/">Java-Stabila</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/advanced-configuration/">Advanced Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/gpg/">Contact Us (GPG Key)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Clients</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../clients/wallet-cli/">Wallet-cli</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Releases</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../releases/">Binary Integrity Check</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../glossary/">Glossary</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">STABILA Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Introduction &raquo;</li>
        
      
    
    <li>Overview</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/stabilaprotocol/documentation-en/edit/master/docs/introduction/overview.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<h1 id="1-project-repository">1. Project Repository<a class="headerlink" href="#1-project-repository" title="Permanent link">&para;</a></h1>
<p>Github Url: <a href="https://github.com/stabilaprotocol">https://github.com/stabilaprotocol</a>
<a href="https://github.com/stabilaprotocol/java-stabila">java-stabila</a> is the source code of the MainNet.
<a href="https://github.com/stabilaprotocol/protocol">protocol</a> is the definition of the api and data structure.
<a href="https://github.com/stabilaprotocol/wallet-cli">wallet-cli</a> is the official command line wallet.</p>
<p>MainNet Configuration:
<a href="https://github.com/stabilaprotocol/stabila-deployment/blob/master/main_net_config.conf">https://github.com/stabilaprotocol/StabilaDeployment/blob/master/main_net_config.conf</a></p>
<h1 id="2-srs-and-committee">2. SRs and Committee<a class="headerlink" href="#2-srs-and-committee" title="Permanent link">&para;</a></h1>
<h2 id="21-how-to-become-a-governor">2.1 How to Become a Governor<a class="headerlink" href="#21-how-to-become-a-governor" title="Permanent link">&para;</a></h2>
<p>In STABILA network, any account can apply to become a governor candidate. Every account can vote for executives. The top 21 candidates with the most votes are Governors. Governors can produce blocks. The votes will be counted every 6 hours, so governors may also change every 6 hours.</p>
<p>To prevent vicious attack, STABILA network burns 9999 STB from the account that applies to become a governor candidate.</p>
<h2 id="22-governors-election">2.2 Governors Election<a class="headerlink" href="#22-governors-election" title="Permanent link">&para;</a></h2>
<p>To vote, you need to have STABILA Power(SP). To get STABILA Power, you need to stake STB. Every 1 staked STB accounts for one STABILA Power(SP). Every account in STABILA network has the right to vote for a governor candidate. After you unstake your staked STB, you will lose the responding STABILA Power(SP), so your previous vote will be invalid.</p>
<p>Note: Only your latest vote will be counted in STABILA network which means your previous vote will be over written by your latest vote.</p>
<p>Example (Using wallet-cli):</p>
<div class="codehilite"><pre><span></span>cdbalance 10,000,000 3 // stake 10 STB to get 10 STABILA Power(SP)
voteexecutive executive1 4 executive2 6 // Vote 4 votes for executive1, 6 votes for executive2
voteexecutive executive1 3 executive2 7 // Vote 3 votes for executive1, 7 votes for executive2
</pre></div>


<p>The final output above is: Vote 3 votes for executive1, 7 votes for executive2</p>
<h2 id="23-reward-for-governors">2.3 Reward for Governors<a class="headerlink" href="#23-reward-for-governors" title="Permanent link">&para;</a></h2>
<p><strong>Votes Reward:</strong>
Every 6 hours, the top 100 Governor candidates with the most votes will share a total amount of 115,200 STB according to their votes percentage. The annual votes reward is 168,192,000 STB in total.</p>
<p><strong>Block Producing Reward:</strong>
Every time after a governor produces a block, it will be reward 32 STB. The 21 governors take turns to produce blocks every 3 seconds. The annual block producing reward is 336,384,000 STB in total.</p>
<p>Every time after a governor produces a block, the 32 STB block producing reward will be sent to it's sub-account. The sub-account is a read-only account, it allows a withdraw action from sub-account to governor account every 24 hours.</p>
<h2 id="24-committee">2.4 Committee<a class="headerlink" href="#24-committee" title="Permanent link">&para;</a></h2>
<h3 id="241-what-is-committee">2.4.1 What is Committee<a class="headerlink" href="#241-what-is-committee" title="Permanent link">&para;</a></h3>
<p>Committee can modify the STABILA network parameters, like transaction fees, block producing reward amount, etc. Committee is composed of the current 21 governors. Every governor has the right to start a proposal. The proposal will be passed after it gets more than 19 approves from the governors and will become valid in the next maintenance period.</p>
<h3 id="242-create-a-proposal">2.4.2 Create a Proposal<a class="headerlink" href="#242-create-a-proposal" title="Permanent link">&para;</a></h3>
<p>Only the account of a governor can create a proposal.
The network parameters can be modified([min,max]):</p>
<ul>
<li>0: MAINTENANCE_TIME_INTERVAL, [3 * 21* 1000, 24 * 3600 * 1000] //governor votes count time interval, currently 6 * 3600 * 1000 ms</li>
<li>1: ACCOUNT_UPGRADE_COST, [0, 100 000 000 000 000 000]  //the fee to apply to become a governor candidate, currently 9999_000_000 UNIT</li>
<li>2: CREATE_ACCOUNT_FEE, [0, 100 000 000 000  000 000] //the fee to create an account, currently 100_000 UNIT</li>
<li>3: TRANSACTION_FEE, [0, 100 000 000 000 000 000] //the fee for bandwidth, currently 1_000 UNIT/byte</li>
<li>4: ASSET_ISSUE_FEE, [0, 100 000 000 000 000 000] //the fee to issue an asset, currently 1024_000_000 UNIT</li>
<li>5: EXECUTIVE_PAY_PER_BLOCK, [0, 100 000 000 000 000 000] //the block producing reward, currently 32_000_000 UNIT</li>
<li>6: EXECUTIVE_STANDBY_ALLOWANCE, [0, 100 000 000 000 000 000] //the votes reward for top 100 Governor candidates, currently 115_200_000_000 UNIT</li>
<li>7: CREATE_NEW_ACCOUNT_FEE_IN_SYSTEM_CONTRACT, //the fee to create an account in system, currently 1_000_000 UNIT</li>
<li>8: CREATE_NEW_ACCOUNT_BANDWIDTH_RATE, //the consumption of bandwidth or STB while creating an account, using together with #7</li>
<li>9: ALLOW_CREATION_OF_CONTRACTS, //to enable the VM</li>
<li>10: REMOVE_THE_POWER_OF_THE_GR, //to clear the votes of GR</li>
<li>11: UCR_FEE, [0,100 000 000 000 000 000] //UNIT</li>
<li>12: EXCHANGE_CREATE_FEE, [0, 100 000 000 000 000 000] //UNIT</li>
<li>13: MAX_CPU_TIME_OF_ONE_TX, [0, 1000] //ms</li>
<li>14: ALLOW_UPDATE_ACCOUNT_NAME, //to allow users to change account name and allow account duplicate name, currently 0, means false</li>
<li>15: ALLOW_SAME_TOKEN_NAME, //to allow create a token with duplicate name, currently 1, means true</li>
<li>16: ALLOW_DELEGATE_RESOURCE, //to enable the resource delegation</li>
<li>17: TOTAL_UCR_LIMIT, //to modify the ucr limit</li>
<li>18: ALLOW_SVM_TRANSFER_SRC10, //to allow smart contract to transfer SRC-10 token, currently 0, means false</li>
</ul>
<p>Example (Using wallet-cli):</p>
<div class="codehilite"><pre><span></span>createproposal id value
id: the serial number (0 ~ 18)
value: the parameter value
</pre></div>


<p>Note: In STABILA network, 1 STB = 1000_000 UNIT</p>
<h3 id="243-vote-for-a-proposal">2.4.3 Vote for a Proposal<a class="headerlink" href="#243-vote-for-a-proposal" title="Permanent link">&para;</a></h3>
<p>Proposal only support YES vote. Since the creation time of the proposal, the proposal is valid within 3 days. If the proposal does not receive enough YES votes within the period of validity, the proposal will be invalid beyond the period of validity. Yes vote can be cancelled.</p>
<p>Example (Using wallet-cli):</p>
<div class="codehilite"><pre><span></span>approveProposal id is_or_not_add_approval
id: proposal id
is_or_not_add_approval: YES vote or cancel YES vote
</pre></div>


<h3 id="244-cancel-proposal">2.4.4 Cancel Proposal<a class="headerlink" href="#244-cancel-proposal" title="Permanent link">&para;</a></h3>
<p>Proposal creator can cancel the proposal before it is passed.</p>
<p>Example (Using wallet-cli):</p>
<div class="codehilite"><pre><span></span>deleteProposal id
id: proposal id
</pre></div>


<h3 id="245-query-proposal">2.4.5 Query Proposal<a class="headerlink" href="#245-query-proposal" title="Permanent link">&para;</a></h3>
<ul>
<li>Query all the proposals list (ListProposals)</li>
<li>Query all the proposals list by pagination (GetPaginatedProposalList)</li>
<li>Query a proposal by proposal id (GetProposalById)</li>
</ul>
<p>For more api detail, please refer to <a href="../../api/http/">Stabila HTTP API</a></p>
<h1 id="3-account-model">3. Account Model<a class="headerlink" href="#3-account-model" title="Permanent link">&para;</a></h1>
<h2 id="31-introduction">3.1 Introduction<a class="headerlink" href="#31-introduction" title="Permanent link">&para;</a></h2>
<p>STABILA uses account model. An account's identity is address, it needs private key signature to operate an account. An account has many attributes, like STB balance, tokens balance, bandwidth, etc. STB and tokens can be transferred from account to account and it costs bandwidth. An account can also issue a smart contract, apply to become a governor candidate, vote, etc. All STABILA's activities are based on account.</p>
<h2 id="32-how-to-create-an-account">3.2 How to Create an Account<a class="headerlink" href="#32-how-to-create-an-account" title="Permanent link">&para;</a></h2>
<p>1.&nbsp;Use a wallet to generate the address and private key. To activate the account, you need to transfer STB or transfer token to the new created account.</p>
<p>2.&nbsp;Use an account already existed in STABILA network to create an account</p>
<h2 id="33-key-pair-generation-algorithm">3.3 Key-pair Generation Algorithm<a class="headerlink" href="#33-key-pair-generation-algorithm" title="Permanent link">&para;</a></h2>
<p>Stabila signature algorithm is ECDSA, curve used is SECP256K1. Private key is a random bumber, public key is a point in the elliptic curve. The process is: first generate a random number d to be the private key, then calculate P = d * G as the public key, G is the elliptic curve base point.</p>
<h2 id="34-address-format">3.4 Address Format<a class="headerlink" href="#34-address-format" title="Permanent link">&para;</a></h2>
<p>Use the public key P as the input, by SHA3 get the result H. The length of the public key is 64 bytes, SHA3 uses Keccak256. Use the last 20 bytes of H, and add a byte of 0x41 in front of it, then the address comes out. Do basecheck to address, here is the final address. All addresses start with 'T'.</p>
<p>basecheck process: first do sha256 calculation to address to get h1, then do sha256 to h1 to get h2, use the first 4 bytes as check to add it to the end of the address to get address||check, do base58 encode to address||check to get the final result.</p>
<p>Character map:
ALPHABET = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"</p>
<h2 id="35-signature">3.5 Signature<a class="headerlink" href="#35-signature" title="Permanent link">&para;</a></h2>
<h3 id="351-signing-steps-for-grpc">3.5.1   Signing Steps for GRPC<a class="headerlink" href="#351-signing-steps-for-grpc" title="Permanent link">&para;</a></h3>
<ol>
<li>Convert the transaction’s raw data to byte[].</li>
<li>Hash the raw data using sha256.  This gives you the Transaction ID.</li>
<li>Sign the results of sha256 with the private key.</li>
<li>Add the signed result to transaction.</li>
</ol>
<h3 id="352-signing-steps">3.5.2   Signing Steps<a class="headerlink" href="#352-signing-steps" title="Permanent link">&para;</a></h3>
<ol>
<li>Use the transaction ID included in the return data of an http request.</li>
<li>Sign the transaction ID with the private key.</li>
<li>Add the signed result to transaction.</li>
</ol>
<h3 id="353-signature-algorithm">3.5.3   Signature algorithm<a class="headerlink" href="#353-signature-algorithm" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>ECDSA algorithm, SECP256K.</p>
</li>
<li>
<p>Example of signature data</p>
</li>
</ol>
<div class="codehilite"><pre><span></span>    priKey:::8e812436a0e3323166e1f0e8ba79e19e217b2c4a53c970d4cca0cfb1078979df
    pubKey::04a5bb3b28466f578e6e93fbfd5f75cee1ae86033aa4bbea690e3312c087181eb366f9a1d1d6a437a9bf9fc65ec853b9fd60fa322be3997c47144eb20da658b3d1
    hash:::159817a085f113d099d3d93c051410e9bfe043cc5c20e43aa9a083bf73660145
    r:::38b7dac5ee932ac1bf2bc62c05b792cd93c3b4af61dc02dbb4b93dacb758123f
    s:::08bf123eabe77480787d664ca280dc1f20d9205725320658c39c6c143fd5642d
    v:::0

   Note: the signed result should be 65 byte in size—r 32 bytes, s 32 bytes and v 1 byte.
</pre></div>


<ol>
<li>Signature verification</li>
</ol>
<p>When a full node receives the transaction, it will verify the signature, comparing an address calculated with hash, r, s and v with the address of the contract. Signature is successfully verified if the two addresses match.</p>
<h3 id="354-example-of-code">3.5.4   Example of code<a class="headerlink" href="#354-example-of-code" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Transaction</span> <span class="nf">sign</span><span class="o">(</span><span class="n">Transaction</span> <span class="n">transaction</span><span class="o">,</span> <span class="n">ECKey</span> <span class="n">myKey</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Transaction</span><span class="o">.</span><span class="na">Builder</span> <span class="n">transactionBuilderSigned</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="na">toBuilder</span><span class="o">();</span>  
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">sha256</span><span class="o">(</span><span class="n">transaction</span><span class="o">.</span><span class="na">getRawData</span><span class="o">().</span><span class="na">toByteArray</span><span class="o">());</span>  
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Contract</span><span class="o">&gt;</span> <span class="n">listContract</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="na">getRawData</span><span class="o">().</span><span class="na">getContractList</span><span class="o">();</span>  

            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listContract</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>

                <span class="n">ECDSASignature</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">myKey</span><span class="o">.</span><span class="na">sign</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span>    
                <span class="n">ByteString</span> <span class="n">bsSign</span> <span class="o">=</span> <span class="n">ByteString</span><span class="o">.</span><span class="na">copyFrom</span><span class="o">(</span><span class="n">signature</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>    
                <span class="c1">//Each contract may be signed with a different private key in the future.</span>
                <span class="n">transactionBuilderSigned</span><span class="o">.</span><span class="na">addSignature</span><span class="o">(</span> <span class="n">bsSign</span> <span class="o">);</span>
                 
                <span class="o">}</span>
</pre></div>


<h1 id="4-network-node">4. Network Node<a class="headerlink" href="#4-network-node" title="Permanent link">&para;</a></h1>
<h2 id="41-governor">4.1 Governor<a class="headerlink" href="#41-governor" title="Permanent link">&para;</a></h2>
<h3 id="411-governor-introduction">4.1.1 Governor Introduction<a class="headerlink" href="#411-governor-introduction" title="Permanent link">&para;</a></h3>
<p>Governor(abbr: GOV) is the block producer in STABILA network, there are 21 GOV. They verify the transactions and write the transactions into the blocks, they take turns to produce blocks. The governors' information is public to everyone in STABILA network. The best way to browse is using <a href="https://stabilascan.org/representatives">stabilascan</a>.</p>
<h3 id="412-governor-deployment">4.1.2 Governor Deployment<a class="headerlink" href="#412-governor-deployment" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/stabilaprotocol/stabila-deployment">Governor Deployment</a></p>
<h3 id="413-recommended-hardware-configuration">4.1.3 Recommended Hardware Configuration<a class="headerlink" href="#413-recommended-hardware-configuration" title="Permanent link">&para;</a></h3>
<p>minimum requirement:
CPU: 16 cores, RAM: 32G, Bandwidth: 100M, Disk: 1T</p>
<p>Recommended requirement:
CPU: &gt; 64 cores RAM: &gt; 64G, Bandwidth: &gt; 500M, Disk: &gt; 20T</p>
<h2 id="42-fullnode">4.2 FullNode<a class="headerlink" href="#42-fullnode" title="Permanent link">&para;</a></h2>
<h3 id="421-fullnode-introduction">4.2.1 FullNode Introduction<a class="headerlink" href="#421-fullnode-introduction" title="Permanent link">&para;</a></h3>
<p>FullNode has the complete block chain data, can update data in real time. It can broadcast the transactions and provide api service.</p>
<h3 id="422-fullnode-deployment">4.2.2 FullNode Deployment<a class="headerlink" href="#422-fullnode-deployment" title="Permanent link">&para;</a></h3>
<p>For Docker installation and deployment please refer to <a href="https://github.com/stabilaprotocol/stabila-deployment">STABILA-Deployment</a></p>
<h3 id="423-recommended-hardware-configuration">4.2.3 Recommended Hardware Configuration<a class="headerlink" href="#423-recommended-hardware-configuration" title="Permanent link">&para;</a></h3>
<p>Minimum requirement:
CPU: 16 cores, RAM: 32G, Bandwidth: 100M, Disk: 1T
Recommended requirement:
CPU: &gt; 64 cores RAM: &gt; 64G, Bandwidth: &gt; 500M, Disk: &gt; 20T</p>
<h2 id="43-soliditynode">4.3 SolidityNode<a class="headerlink" href="#43-soliditynode" title="Permanent link">&para;</a></h2>
<h3 id="431-soliditynode-introduction">4.3.1 SolidityNode Introduction<a class="headerlink" href="#431-soliditynode-introduction" title="Permanent link">&para;</a></h3>
<p>SolidityNode only synchronize solidified blocks data from the fullNode it specifies, It also provie api service.</p>
<h3 id="432-soliditynode-deployment">4.3.2 SolidityNode Deployment<a class="headerlink" href="#432-soliditynode-deployment" title="Permanent link">&para;</a></h3>
<p>For Docker installation and deployment please refer to <a href="https://github.com/stabilaprotocol/stabila-deployment">STABILA-Deployment</a></p>
<h3 id="433-recommended-hardware-configuration">4.3.3 Recommended Hardware Configuration<a class="headerlink" href="#433-recommended-hardware-configuration" title="Permanent link">&para;</a></h3>
<p>Minimum requirement:
CPU: 16 cores, RAM: 32G, Bandwidth: 100M, Disk: 1T
Recommended requirement:
CPU: &gt; 64 cores RAM: &gt; 64G, Bandwidth: &gt; 500M, Disk: &gt; 20T</p>
<h2 id="44-stabila-network-instructure">4.4 STABILA Network Instructure<a class="headerlink" href="#44-stabila-network-instructure" title="Permanent link">&para;</a></h2>
<p>STABILA network uses Peer-to-Peer(P2P) network instructure, all nodes status equal. There are three types of node: Governor, FullNode, SolidityNode. Governor produces blocks, FullNode synchronizes blocks and broadcasts transactions, SolidityNode synchronizes solidified blocks. Any device that deploy the java-stabila code can join STABILA network as a node.
<img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/network.png" /></p>
<h2 id="45-fullnode-and-soliditynode-fast-deployment">4.5 FullNode and SolidityNode Fast Deployment<a class="headerlink" href="#45-fullnode-and-soliditynode-fast-deployment" title="Permanent link">&para;</a></h2>
<p>Download fast deployment script, run the script according to different types of node.
please refer to <a href="https://github.com/stabilaprotocol/stabila-deployment#deployment-of-soliditynode-on-the-one-host">Node Fast Deployment</a></p>
<h2 id="46-mainnet-privatenet">4.6 MainNet, PrivateNet<a class="headerlink" href="#46-mainnet-privatenet" title="Permanent link">&para;</a></h2>
<p>MainNet, PrivateNet all use the same code, only the node start configuration varies.</p>
<h3 id="461-mainnet">4.6.1 MainNet<a class="headerlink" href="#461-mainnet" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/stabilaprotocol/stabila-deployment/blob/master/main_net_config.conf">MainNet configuration</a></p>
<h3 id="463-privatenet">4.6.3 PrivateNet<a class="headerlink" href="#463-privatenet" title="Permanent link">&para;</a></h3>
<p><strong>4.6.3.1 Preconditions</strong></p>
<ul>
<li>at least two accounts</li>
<li>at least deploy one Governor to produce blocks</li>
<li>deploy serval FullNodes to synchronize blocks and broadcast transactions</li>
<li>Governor and FullNode comprise the private network</li>
</ul>
<p><strong>4.6.3.2 Deployment</strong></p>
<p><strong>4.6.3.2.1 Step 1: Governor Deployment</strong></p>
<p>1.&nbsp;download private_net_config.conf</p>
<div class="codehilite"><pre><span></span>wget https://raw.githubusercontent.com/stabilaprotocol/stabila-deployment/master/private_net_config.conf
</pre></div>


<p>2.&nbsp;add your private key in localexecutive
 3.&nbsp;set genesis.block.executives as the private key's corresponding address
 4.&nbsp;set p2p.version, any positive integer but 11111
 5.&nbsp;set the first GOV needSyncCheck = false, others can be set true
 6.&nbsp;set node.discovery.enable = true
 7.&nbsp;run the script</p>
<div class="codehilite"><pre><span></span>nohup java -Xmx6g -XX:+HeapDumpOnOutOfMemoryError -jar FullNode.jar  --executive  -c private_net_config.conf

<span class="nb">command</span> line parameters introduction:
--executive: start executive <span class="k">function</span>. For Governor, this parameter is required, i.e.: --executive
--log-config: specify the log configuration file path, i.e.: --log-config logback.xml
-c: specify the configuration file path, i.e.: -c config.conf
</pre></div>


<p>The usage of the log file:
 You can change the level of the module to control the log output. The default level of each module is INFO, for example: only print the message with the level higher than warn:
 <logger name="net" level="WARN"/>
 The parameters in configuration file that need to modify:
 localexecutive:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/localexecutive.png" />
 executives:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/executive.png" />
 version:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/p2p_version.png" />
 enable:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/discovery_enable.png" /></p>
<p><strong>4.6.3.2.2  Step 2: FullNode Deployment</strong></p>
<p>1.&nbsp;Download private_net_config.conf</p>
<div class="codehilite"><pre><span></span>wget https://raw.githubusercontent.com/stabilaprotocol/stabila-deployment/master/private_net_config.conf
</pre></div>


<p>2.&nbsp;set seed.node ip.list with GOV's ip and port</p>
<p>3.&nbsp;set p2p.version the same as Governor's p2p.version</p>
<p>4.&nbsp;set genesis.block the same as genesis.block</p>
<p>5.&nbsp;set needSyncCheck true</p>
<p>6.&nbsp;set node.discovery.enable true</p>
<p>7.&nbsp;run the script</p>
<div class="codehilite"><pre><span></span> nohup java -Xmx6g -XX:+HeapDumpOnOutOfMemoryError -jar FullNode.jar  -c private_net_config.conf

 <span class="nb">command</span> lines parameters
 --log-config: specify the log configuration file path, i.e.: --log-config logback.xml
 -c: specify the configuration file path, i.e.: -c config.conf
</pre></div>


<p>The usage of the log file:
 You can change the level of the module to control the log output. The default level of each module is INFO, for example: only print the message with the level higher than warn:
 <logger name="net" level="WARN"/>
 The parameters in configuration file that need to modify:
 ip.list:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/ip_list.png" />
 p2p.version:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/p2p_version.png" />
 genesis.block:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/genesis_block.png" />
 needSyncCheck:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/need_sync_check.png" />
 node.discovery.enable:</p>
<p><img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/discovery_enable.png" /></p>
<h2 id="47-db-engine">4.7 DB Engine<a class="headerlink" href="#47-db-engine" title="Permanent link">&para;</a></h2>
<h3 id="471-rocksdb">4.7.1 Rocksdb<a class="headerlink" href="#471-rocksdb" title="Permanent link">&para;</a></h3>
<p><strong>4.7.1.1 Configuration</strong></p>
<p>Use rocksdb as the data storage engine, need to set db.engine to "ROCKSDB"
 <img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/db_engine.png" />
 Note: rocksdb only support db.version=2, do not support db.version=1</p>
<p>The optimization parameters rocksdb support:
 <img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/rocksdb_tuning_parameters.png" /></p>
<p><strong>4.7.1.2 Use rocksdb's data backup function</strong></p>
<p>Choose rocksdb to be the data storage engine, you can use it's data backup function while running
 <img alt="image" src="https://raw.githubusercontent.com/stabilaprotocol/documentation-en/master/images/db_backup.png" /></p>
<p>Note: FullNode can use data backup function. In order not to affect Governor's block producing performance, Governor does not support backup service, but Governor's backup service node can use this function.</p>
<p><strong>4.7.1.3 Convert leveldb data to rocksdb data</strong></p>
<p>The data storage structure of leveldb and rocksdb is not compatible, please make sure the node use the same type of data engine all the time. We provide data conversion script which can convert leveldb data to rocksdb data.</p>
<p>Usage:</p>
<div class="codehilite"><pre><span></span> cd to the source code root directory
 ./gradlew build   #build the source code
 java -jar build/libs/DBConvert.jar  #run data conversion command
</pre></div>


<p>Note: If the node's data storage directory is self-defined, before run DBConvert.jar, you need to add the following parameters:</p>
<p><strong>src_db_path</strong>: specify LevelDB source directory, default output-directory/database
 <strong>dst_db_path</strong>: specify RocksDb source directory, default output-directory-dst/database</p>
<p>Example, if you run the script like this:</p>
<div class="codehilite"><pre><span></span> nohup java -jar FullNode.jar -d your_database_dir &amp;
</pre></div>


<p>Then, you should run DBConvert.jar this way:</p>
<div class="codehilite"><pre><span></span> java -jar build/libs/DBConvert.jar  your_database_dir/database  output-directory-dst/database
</pre></div>


<p>Note: You have to stop the running of the node, and then to run the data conversion script.</p>
<p>If you do not want to stop the running of the node for too long, after node is shut down, you can copy leveldb's output-directory to the new directory, and then restart the node. Run DBConvert.jar in the previous directory of the new directory, and specify the parameters: <code>src_db_path</code> and <code>dst_db_path</code>.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span> cp -rf output-directory /tmp/output-directory
 cd /tmp
 java -jar DBConvert.jar output-directory/database  output-directory-dst/database
</pre></div>


<p>All the whole data conversion process may take 10 hours.</p>
<p><strong>4.7.1.4 rocksdb vs leveldb</strong></p>
<h1 id="5-smart-contract">5. Smart Contract<a class="headerlink" href="#5-smart-contract" title="Permanent link">&para;</a></h1>
<h2 id="51-stabila-smart-contract-introduction">5.1 STABILA Smart Contract Introduction<a class="headerlink" href="#51-stabila-smart-contract-introduction" title="Permanent link">&para;</a></h2>
<p>Smart contract is a computerized transaction protocol that automatically implements its terms. Smart contract is the same as common contract, they all define the terms and rules related to the participants. Once the contract is started, it can run in the way it is designed.</p>
<p>STABILA smart contract support Solidity language in (Ethereum). Currently recommend Solidity language version is 0.4.24 ~ 0.4.25. Write a smart contract, then build the smart contract and deploy it to STABILA network. When the smart contract is triggered, the corresponding function will be executed automatically.</p>
<h2 id="52-stabila-smart-contract-features">5.2 STABILA Smart Contract Features<a class="headerlink" href="#52-stabila-smart-contract-features" title="Permanent link">&para;</a></h2>
<p>STABILA virtual machine is based on Ethereum solidity language, it also has STABILA's own features.</p>
<h3 id="521-smart-contract">5.2.1 Smart Contract<a class="headerlink" href="#521-smart-contract" title="Permanent link">&para;</a></h3>
<p>STABILA VM is compatible with Ethereum's smart contract, using protobuf to define the content of the contract:</p>
<div class="codehilite"><pre><span></span>message SmartContract {
  message ABI {
    message Entry {
      enum EntryType {
        UnknownEntryType = 0;
        Constructor = 1;
        Function = 2;
        Event = 3;
        Fallback = 4;
      }
      message Param {
        bool indexed = 1;
        string name = 2;
        string type = 3;
        // SolidityType type = 3;
      }
      enum StateMutabilityType {
        UnknownMutabilityType = 0;
        Pure = 1;
        View = 2;
        Nonpayable = 3;
        Payable = 4;
      }

      bool anonymous = 1;
      bool constant = 2;
      string name = 3;
      repeated Param inputs = 4;
      repeated Param outputs = 5;
      EntryType type = 6;
      bool payable = 7;
      StateMutabilityType stateMutability = 8;
    }
    repeated Entry entrys = 1;
  }
  bytes origin_address = 1;
  bytes contract_address = 2;
  ABI abi = 3;
  bytes bytecode = 4;
  int64 call_value = 5;
  int64 consume_user_resource_percent = 6;
  string name = 7；
  int64 origin_ucr_limit = 8;
}
</pre></div>


<p>origin_address: smart contract creator address</p>
<p>contract_address: smart contract address</p>
<p>abi: the api information of the all the function of the smart contract
bytecode: smart contract byte code</p>
<p>call_value: STB transferred into smart contract while call the contract
consume_user_resource_percent: resource consumption percentage set by the developer</p>
<p>name: smart contract name</p>
<p>origin_ucr_limit: ucr consumption of the developer limit in one call, must greater than 0. For the old contracts, if this parameter is not set, it will be set 0, developer can use
 updateUcrLimit api to update this parameter (must greater than 0)</p>
<p>Through other two grpc message types CreateSmartContract and TriggerSmartContract to create and use smart contracts.</p>
<h3 id="522-the-usage-of-the-function-of-smart-contract">5.2.2 The Usage of the Function of Smart Contract<a class="headerlink" href="#522-the-usage-of-the-function-of-smart-contract" title="Permanent link">&para;</a></h3>
<p>1.&nbsp;constant function and inconstant function</p>
<p>There are two types of function according to whether any change will be made to the properties on the chain: constant function and inconstant function
Constant function uses view/pure/constant to decorate, will return the result on the node it is called and not be broadcasted in the form of a transaction
Inconstant function will be broadcasted in the form of a transaction while being called, the function will change the data on the chain, such as transfer, changing the value of the internal variables of contracts, etc.</p>
<p>Note: If you use create command inside a contract (CREATE instruction), even use view/pure/constant to decorate the dynamically created contract function, this function will still be treated as inconstant function, be dealt in the form of transaction.</p>
<p>2.&nbsp;message calls</p>
<p>Message calls can call the functions of other contracts, also can transfer STB to the accounts of contract and none-contract. Like the common STABILA triggercontract, Message calls have initiator, recipient, data, transfer amount, fees and return attributes. Every message call can generate a new one recursively. Contract can define the distribution of the remaining ucr in the internal message call. If it comes with OutOfUcrException in the internal message call, it will return false, but not error. In the meanwhile, only the gas sent with the internal message call will be consumed, if ucr is not specified in call.value(ucr), all the remaining ucr will be used.</p>
<p>3.&nbsp;delegate call/call code/libary</p>
<p>There is a special type of message call, delegate call. The difference with common message call is the code of the target address will be run in the context of the contract that initiates the call, msg.sender and msg.value remain unchanged. This means a contract can dynamically load code from another address while running. Storage, current address and balance all point to the contract that initiates the call, only the code is get from the address being called. This gives Solidity the ability to achieve the 'lib' function: the reusable code lib can be put in the storage of a contract to implement complex data structure library.</p>
<p>4.&nbsp;CREATE command</p>
<p>This command will create a new contract with a new address. The only difference with Ethereum is the newly generated STABILA address used the smart contract creation transaction id and the hash of nonce called combined. Different from Ethereum, the definition of nonce is the comtract sequence number of the creation of the root call. Even there are many CREATE commands calls, contract number in sequence from 1. Refer to the source code for more detail.
Note: Different from creating a contract by grpc's deploycontract, contract created by CREATE command does not store contract abi.</p>
<p>5.&nbsp;built-in function and built-in function attribute (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)</p>
<p>1)SVM is compatible with solidity language's transfer format, including:
- accompany with constructor to call transfer
- accompany with internal function to call transfer
- use transfer/send/call/callcode/delegatecall to call transfer</p>
<p>Note: STABILA's smart contract is different from STABILA's system contract, if the transfer to address does not exist it can not create an account by smart contract transfer.</p>
<p>2)Different accounts vote for Governor (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
3)Governor gets all the reward (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
4)Governor approves or disapproves the proposal (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
5)Governor proposes a proposal (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
6)Governor deletes  a proposal (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
7)STABILA byte address converts to solidity address (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
8)STABILA string address converts to solidity address (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
9)Send token to target address (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
10)Query token amount of target address (Since Odyssey-v3.1.1, SVM built-in function is not supported temporarily)
11)Compatible with all the built-in functions of Ethereum</p>
<p>Note: Ethereum's RIPEMD160 function is not recommended, because the return of STABILA is a hash result based on STABILA's sha256, not an accurate Ethereum RIPEMD160.</p>
<h3 id="523-contract-address-using-in-solidity-language">5.2.3 Contract Address Using in Solidity Language<a class="headerlink" href="#523-contract-address-using-in-solidity-language" title="Permanent link">&para;</a></h3>
<p>Ethereum VM address is 20 bytes, but STABILA's VM address is 21 bytes.</p>
<p>1.&nbsp;address conversion</p>
<p>Need to convert STABILA's address while using in solidity (recommended):</p>
<div class="codehilite"><pre><span></span>/**
     *  @dev    convert uint256 (HexString add 0x at beginning) stabila address to solidity address type
     *  @param  stabilaAddress uint256 stabilaAddress, begin with 0x, followed by HexString
     *  @return Solidity address type
*/

function convertFromStabilaInt(uint256 stabilaAddress) public view returns(address){
        return address(stabilaAddress);
}
</pre></div>


<p>This is similar with the grammar of the conversion from other types converted to address type in Ethereum.</p>
<p>2.&nbsp;address judgement</p>
<p>Solidity has address constant judgement, if using 21 bytes address the compiler will throw out an error, so you should use 20 bytes address, like:</p>
<div class="codehilite"><pre><span></span>function compareAddress(address stabilaAddress) public view returns (uint256){
        // if (stabilaAddress == 0x41ca35b7d915458ef540ade6068dfe2f44e8fa733c) { // compile error
        if (stabilaAddress == 0xca35b7d915458ef540ade6068dfe2f44e8fa733c) { // right
            return 1;
        } else {
            return 0;
        }
}
</pre></div>


<p>But if you are using wallet-cli, you can use 21 bytes address, like 0000000000000000000041ca35b7d915458ef540ade6068dfe2f44e8fa733c</p>
<p>3.&nbsp;variable assignment</p>
<p>Solidity has address constant assignment, if using 21 bytes address the compiler will throw out an error, so you should use 20 bytes address, like:</p>
<div class="codehilite"><pre><span></span>function assignAddress() public view {
        // address newAddress = 0x41ca35b7d915458ef540ade6068dfe2f44e8fa733c; // compile error
        address newAddress = 0xca35b7d915458ef540ade6068dfe2f44e8fa733c;
        // do something
}
</pre></div>


<p>If you want to use STABILA address of string type (TLLM21wteSPs4hKjbxgmH1L6poyMjeTbHm) please refer to (2-4-7,2-4-8).</p>
<h2 id="53-ucr-introduction">5.3 Ucr Introduction<a class="headerlink" href="#53-ucr-introduction" title="Permanent link">&para;</a></h2>
<p>Each command of smart contract consume system resource while running, we use 'Ucr' as the unit of the consumption of the resource.</p>
<h3 id="531-how-to-get-ucr">5.3.1 How to Get Ucr<a class="headerlink" href="#531-how-to-get-ucr" title="Permanent link">&para;</a></h3>
<p>Stake STB to get ucr.</p>
<p>Example (Using wallet-cli):</p>
<div class="codehilite"><pre><span></span>cdBalance cded_balance cded_duration [ResourceCode:0 BANDWIDTH,1 UCR]
</pre></div>


<p>Stake STB to get ucr, ucr obtained = user's STB staked amount / total amount of staked STB in STABILA * 50_000_000_000.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>If there are only two users, A stakes 2 STB, B stakes 2 STB
the ucr they can get is:
A: 25_000_000_000 and ucr_limit is 25_000_000_000
B: 25_000_000_000 and ucr_limit is 25_000_000_000

when C stakes 1 STB:
the ucr they can get is:
A: 20_000_000_000 and ucr_limit is 20_000_000_000
B: 20_000_000_000 and ucr_limit is 20_000_000_000
B: 10_000_000_000 and ucr_limit is 10_000_000_000
</pre></div>


<p><strong> Ucr Recovery </strong></p>
<p>The ucr consumed will reduce to 0 smoothly within 24 hours.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>at one moment, A has used 72_000_000 Ucr
if there is no continuous consumption or STB stake
one hour later, the ucr consumption amount will be 72_000_000 - (72_000_000 * (60*60/60*60*24)) Ucr = 69_000_000 Ucr
24 hours later, the ucr consumption amount will be 0 Ucr
</pre></div>


<h3 id="532-how-to-set-fee-limit-caller-must-read">5.3.2 How to Set Fee Limit (Caller Must Read)<a class="headerlink" href="#532-how-to-set-fee-limit-caller-must-read" title="Permanent link">&para;</a></h3>
<hr />
<p><em>Within the scope of this section, the smart contract developer will be called "developer", the users or other contracts which call the smart contract will be called "caller"</em></p>
<p><em>The amount of ucr consumed while call the contract can be converted to STB or UNIT, so within the scope of this section, when refer to the consumption of the resource, there's no strict difference between Ucr, STB and UNIT, unless they are used as a number unit.</em></p>
<hr />
<p>Set a rational fee limit can guarantee the smart contract execution. And if the execution of the contract cost great ucr, it will not consume too much ucr from the caller. Before you set fee limit, you need to know several conception:</p>
<p>1.&nbsp;The legal fee limit is a integer between 0 - 10^9, unit is UNIT.</p>
<p>2.&nbsp;Different smart contracts consume different amount of ucr due to their complexity. The same trigger in the same contract almost consumes the same amount fo ucr[1]. When the contract is triggered, the commands will be executed one by one and consume ucr. If it reaches the fee limit, commands will fail to be executed, and ucr is not refundable.</p>
<p>3.&nbsp;Currently fee limit only refers to the ucr converted to UNIT that will be consumed from the caller[2]. The ucr consumed by triggering contract also includes developer's share.</p>
<p>4.&nbsp;For a vicious contract, if it encounters execution timeout or bug crash, all it's ucr will be consumed.</p>
<p>5.&nbsp;Developer may undertake a proportion of ucr consumption(like 90%). But if the developer's ucr is not enough for consumption, the rest of the ucr consumption will be undertaken by caller completely. Within the fee limit range, if the caller does not have enough ucr, then it will burn equivalent amount of STB [2].</p>
<p>To encourage caller to trigger the contract, usually developer has enough ucr.</p>
<p><strong> Example </strong></p>
<p>How to estimate the fee limit:</p>
<p>Assume contract C's last execution consumes 18000 Ucr, so estimate the ucr consumption limit to be 20000 Ucr[3]</p>
<p>According to the staked STB amount and ucr conversion, assume 1 STB = 400 ucr.</p>
<p>When to burn STB, 1 STB = 10000 ucr[4]</p>
<p>Assume developer undertake 90% ucr consumption, and developer has enough ucr.</p>
<p>Then the way to estimate the fee limit is:</p>
<div class="codehilite"><pre><span></span>1). A = 20000 ucr * (1 STB / 400 ucr) = 50 STB = 50_000_000 UNIT,

2). B = 20000 ucr * (1 STB / 10000 ucr) = 2 STB = 2_000_000 UNIT,

3). Take the greater number of A and B, which is 50_000_000 UNIT,

4). Developer undertakes 90% ucr consumption, caller undertakes 10% ucr consumption,
</pre></div>


<p>So, the caller is suggested to set fee limit to 50_000_000 UNIT * 10% = 5_000_000 UNIT</p>
<p>Note:</p>
<div class="codehilite"><pre><span></span>[1] The ucr consumption of each execution may fluctuate slightly due to the situation of all the nodes.
[2] STABILA may change this policy.
[3] The estimated ucr consumption limit for the next execution should be greater than the last one.
[4] 1 STB = 10^4 ucr is a fixed number for burning STB to get ucr, STABILA may change it in future.
</pre></div>


<h3 id="533-ucr-calculation-developer-must-read">5.3.3 Ucr Calculation (Developer Must Read)<a class="headerlink" href="#533-ucr-calculation-developer-must-read" title="Permanent link">&para;</a></h3>
<p>1.&nbsp;In order to punish the vicious developer, for the abnormal contract, if the execution times out (more than 50ms) or quits due to bug (revert not included), the maximum available ucr will be deducted. If the contract runs normally or revert, only the ucr needed for the execution of the commands will be deducted.</p>
<p>2.&nbsp;Developer can set the proportion of the ucr consumption it undertakes during the execution, this proportion cna be changed later. If the developer's ucr is not enough, it will consume the caller's ucr.</p>
<p>3.&nbsp;Currently, the total ucr available when trigger a contract is composed of caller fee limit and developer's share</p>
<p>Note:
- If the developer is not sure about whether the contract is normal, do not set caller's ucr consumption proportion to 0%, in case all developer's ucr will be deducted due to vicious execution[1].
- We recommend to set caller's ucr consumption proportion to 10% ~ 100%[2].</p>
<p><strong>Example 1</strong></p>
<p>A has an account with a balance of 90 STB(90000000 UNIT) and 10 STB staked for 100000 ucr.</p>
<p>Smart contract C set the caller ucr consumption proportion to 100% which means the caller will pay for the ucr consumption completely.</p>
<p>A triggers C, the fee limit set is 30000000 (unit UNIT, 30 STB)</p>
<p>So during this trigger the ucr A can use is from two parts:
- A's ucr by staking STB;
- The ucr converted from the amount of STB burning according to a fixed rate;</p>
<p>If fee limit is greater than the ucr obtained from staking STB, then it will burn STB to get ucr. The fixed rate is: 1 Ucr = 100 UNIT, fee limit still has (30 - 10) STB = 20 STB available, so the ucr it can keep consuming is 20 STB / 100 UNIT = 200000 ucr.</p>
<p>Finally, in this call, the ucr A can use is (100000 + 200000) = 300000 ucr.</p>
<p>If contract executes successfully without any exception, the ucr needed for the execution will be deducted. Generally, it is far more less than the amount of ucr this trigger can use.</p>
<p>If Assert-style error come out, it will consume the whole number of ucr set for fee limit.</p>
<p><strong>Example 2</strong></p>
<p>A has an account with a balance of 90 STB(90000000 UNIT) and 10 STB staked for 100000 ucr.</p>
<p>Smart contract C set the caller ucr consumption proportion to 40% which means the developer will pay for the rest 60% ucr consumption.</p>
<p>Developer D stakes 50 STB to get 500000 ucr.</p>
<p>A triggers C, the fee limit set is 200000000 (unit UNIT, 200 STB).</p>
<p>So during this trigger the ucr A can use is from three parts:
- A's ucr by staking STB -- X;
- The ucr converted from the amount of STB bruning according to a fixed rate -- Y;
If fee limit is greater than the ucr obtained from staking STB, then it will burn STB to get ucr. The fixed rate is: 1 Ucr = 100 UNIT, fee limit still has (200 - 10) STB = 190 STB available, but A only has 90 STB left, so the ucr it can keep consuming is 90 STB / 100 UNIT = 900000 ucr;
- D's ucr by staking STB -- Z;</p>
<p>There are two situation:
if (X + Y) / 40% &gt;= Z / 60%, the ucr A can use is X + Y + Z
if (X + Y) / 40% &lt; Z / 60%, the ucr A can use is (X + Y) / 40%</p>
<p>If contract executes successfully without any exception, the ucr needed for the execution will be deducted. Generally, it is far more less than the amount of ucr this trigger can use.</p>
<p>Note: when developer create a contract, do not set consume_user_resource_percent to 0, which means developer will undertake all the ucr consumption. If Assert-style error comes out, it will consume all ucr from the developer itsef.</p>
<p>To avoid unnecessary lost, 10 - 100 is recommended for consume_user_resource_percent.</p>
<h2 id="54-smart-contract-development-tool">5.4 Smart Contract Development Tool<a class="headerlink" href="#54-smart-contract-development-tool" title="Permanent link">&para;</a></h2>
<p><strong>Start a Private Net</strong></p>
<p>Make sure the fullnode code has been deployed locally, you can check if 'Produce block successfully' log appears in FullNode/logs/stabila.log</p>
<p><strong> Write your first smart contract </strong></p>
<p>pragma solidity ^0.4.0;
contract DataStore {</p>
<div class="codehilite"><pre><span></span><span class="nx">mapping</span><span class="p">(</span><span class="nx">uint256</span> <span class="o">=&gt;</span> <span class="nx">uint256</span><span class="p">)</span> <span class="nx">data</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">set</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">uint256</span> <span class="nx">value</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="nx">data</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">get</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">key</span><span class="p">)</span> <span class="nx">view</span> <span class="kr">public</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">uint256</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">value</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>


<p>}</p>
<p><strong>Using Wallet-cli to Deploy</strong></p>
<p>Download Wallet-Cli and build</p>
<div class="codehilite"><pre><span></span><span class="c1"># download source code</span>
git clone https://github.com/stabilaprotocol/wallet-cli
<span class="nb">cd</span>  wallet-cli
<span class="c1"># build</span>
./gradlew build
<span class="nb">cd</span>  build/libs
</pre></div>


<p>Note: You need to change the node ip and port in config.conf</p>
<p>start wallet-cli</p>
<div class="codehilite"><pre><span></span>java -jar wallet-cli.jar
</pre></div>


<p>after started, you can use command lines to operate:</p>
<div class="codehilite"><pre><span></span>importwallet
&lt;input your password twice for your account&gt;
&lt;input your private key&gt;
login
&lt;input your password you set&gt;
getbalance
</pre></div>


<p>deploy contract</p>
<div class="codehilite"><pre><span></span>Shell
# contract deployment command
DeployContract contractName ABI byteCode constructor params isHex fee_limit consume_user_resource_percent &lt;value&gt; &lt;library:address,library:address,...&gt;

# parameters
contract_name: Contract name
ABI: ABI content from generated .abi file
bytecode: ByteCode content from generated .bin file
constructor: When deploy contract, this will be called. If is needed, write as constructor(uint256,string). If not, just write #
params: The parameters of the constructor, use &#39;,&#39; to split, like  1, &quot;test&quot;, if no constructor, just write #
fee_limit: The STB consumption limit for the deployment, unit is UNIT(1 UNIT = 10^-6 STB)
consume_user_resource_percent: Consume user&#39;s resource percentage. It should be an integer between [0, 100]. if 0, means it does not consume user&#39;s resource until the developer&#39;s resource has been used up
value: The amount of STB transfer to the contract when deploy
library: If the contract contains library, you need to specify the library address

# example
deploycontract DataStore [{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;key&quot;,&quot;type&quot;:&quot;uint256&quot;},{&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;set&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[{&quot;name&quot;:&quot;key&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;get&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;}] 608060405234801561001057600080fd5b5060de8061001f6000396000f30060806040526004361060485763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631ab06ee58114604d5780639507d39a146067575b600080fd5b348015605857600080fd5b506065600435602435608e565b005b348015607257600080fd5b50607c60043560a0565b60408051918252519081900360200190f35b60009182526020829052604090912055565b600090815260208190526040902054905600a165627a7a72305820fdfe832221d60dd582b4526afa20518b98c2e1cb0054653053a844cf265b25040029 # # false 1000000 30 0
If it is deployed successfully, it will return &#39;Deploy the contract successfully&#39;
</pre></div>


<p>get the contract address</p>
<div class="codehilite"><pre><span></span>Your smart contract address will be: &lt;contract address&gt;

# in this example
Your smart contract address will be: TTWq4vMEYB2yibAbPV7gQ4mrqTyX92fha6
</pre></div>


<p>call the contract to store data, query data</p>
<div class="codehilite"><pre><span></span>Shell
# call contract command
triggercontract &lt;contract_address&gt; &lt;method&gt; &lt;args&gt; &lt;is_hex&gt; &lt;fee_limit&gt; &lt;value&gt;

# parameters
contract_address: Contract address, like TTWq4vMEYB2yibAbPV7gQ4mrqTyX92fha6
method: The method called, like set(uint256,uint256) or fool(), use &#39;,&#39; to split the parameters. Do not leave space between parameters
args: The parameters passed to the method called, use &#39;,&#39; to split the parameters. Do not leave space between parameters
is_hex: whether the input parameters is Hex, false or true
fee_limit: The STB consumption limit for the trigger, unit is UNIT(1 UNIT = 10^-6 STB)
value: The amount of STB transfer to the contract when trigger

# trigger example
## set mapping 1-&gt;1
triggercontract TTWq4vMEYB2yibAbPV7gQ4mrqTyX92fha6 set(uint256,uint256) 1,1 false 1000000  0000000000000000000000000000000000000000000000000000000000000000

## get mapping key = 1
triggercontract TTWq4vMEYB2yibAbPV7gQ4mrqTyX92fha6 get(uint256) 1 false 1000000  0000000000000000000000000000000000000000000000000000000000000000
</pre></div>


<p>If the function called is constant or view, wallet-cli will return the result directly.
If it contains library, before deploy the contract you need to deploy the library first. After you deploy library, you can get the library address, then fill the address in library:address,library:address,...</p>
<div class="codehilite"><pre><span></span># for instance, using remix to get the bytecode of the contract, like:
608060405234801561001057600080fd5b5061013f806100206000396000f300608060405260043610610041576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063f75dac5a14610046575b600080fd5b34801561005257600080fd5b5061005b610071565b6040518082815260200191505060405180910390f35b600073&lt;b&gt;__browser/oneLibrary.sol.Math3__________&lt;\b&gt;634f2be91f6040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156100d357600080fd5b505af41580156100e7573d6000803e3d6000fd5b505050506040513d60208110156100fd57600080fd5b81019080805190602001909291905050509050905600a165627a7a7230582052333e136f236d95e9d0b59c4490a39e25dd3a3dcdc16285820ee0a7508eb8690029
</pre></div>


<p>The address of the library deployed before is: TSEJ29gnBkxQZR3oDdLdeQtQQykpVLSk54
When you deploy, you need to use browser/oneLibrary.sol.Math3:TSEJ29gnBkxQZR3oDdLdeQtQQykpVLSk54 as the parameter of deploycontract.</p>
<h1 id="6-src-10-token-introduction">6. SRC-10 Token Introduction<a class="headerlink" href="#6-src-10-token-introduction" title="Permanent link">&para;</a></h1>
<p>STABILA network support two types of token, one is SRC-20 token issued by smart contract, the other one is SRC-10 token issued by system contract.</p>
<h2 id="61-how-to-issue-a-src-10-token">6.1 How to Issue a SRC-10 Token<a class="headerlink" href="#61-how-to-issue-a-src-10-token" title="Permanent link">&para;</a></h2>
<p>HTTP API:</p>
<div class="codehilite"><pre><span></span>wallet/createassetissue
Description: Issue a token
demo: curl -X POST  http://127.0.0.1:8090/wallet/createassetissue -d &#39;{
&quot;owner_address&quot;:&quot;41e552f6487585c2b58bc2c9bb4492bc1f17132cd0&quot;,
&quot;name&quot;:&quot;0x6173736574497373756531353330383934333132313538&quot;,
&quot;abbr&quot;: &quot;0x6162627231353330383934333132313538&quot;,
&quot;total_supply&quot; :4321,
&quot;stb_num&quot;:1,
&quot;num&quot;:1,
&quot;start_time&quot; : 1530894315158,
&quot;end_time&quot;:1533894312158,
&quot;description&quot;:&quot;007570646174654e616d6531353330363038383733343633&quot;,
&quot;url&quot;:&quot;007570646174654e616d6531353330363038383733343633&quot;,
&quot;free_asset_net_limit&quot;:10000,
&quot;public_free_asset_net_limit&quot;:10000,
&quot;cded_supply&quot;:{&quot;cded_amount&quot;:1, &quot;cded_days&quot;:2}
}&#39;
Parameter owner_address: Owner address, default hexString
Parameter name: Token name, default hexString
Parameter abbr: Token name abbreviation, default hexString
Parameter total_supply: Token total supply
Parameter stb_num: Define the price by the ratio of stb_num/num,
Parameter num: Define the price by the ratio of stb_num/num
Parameter start_time: ICO start time
Parameter end_time: ICO end time
Parameter description: Token description, default hexString
Parameter url: Token official website url, default hexString
Parameter free_asset_net_limit: Token free asset net limit
Parameter public_free_asset_net_limit: Token public free asset net limit
Parameter cded_supply: Token staked supply
Parameter permission_id: Optional, for multi-signature use
Return: Transaction object
Note: The unit of &#39;stb_num&#39; is UNIT
</pre></div>


<h2 id="62-participate-src-10-token">6.2 Participate SRC-10 Token<a class="headerlink" href="#62-participate-src-10-token" title="Permanent link">&para;</a></h2>
<p>HTTP API:</p>
<div class="codehilite"><pre><span></span>wallet/participateassetissue
Description: Participate a token
demo: curl -X POST http://127.0.0.1:8090/wallet/participateassetissue -d &#39;{
&quot;to_address&quot;: &quot;41e552f6487585c2b58bc2c9bb4492bc1f17132cd0&quot;,
&quot;owner_address&quot;:&quot;41e472f387585c2b58bc2c9bb4492bc1f17342cd1&quot;,
&quot;amount&quot;:100,
&quot;asset_name&quot;:&quot;3230313271756265696a696e67&quot;
}&#39;
Parameter to_address: The issuer address of the token, default hexString
Parameter owner_address: The participant address, default hexString
Parameter amount: Participate token amount
Parameter asset_name: Token id, default hexString
Parameter permission_id: Optional, for multi-signature use
Return: Transaction object
Note: The unit of &#39;amount&#39; is the smallest unit of the token
</pre></div>


<h2 id="63-src-10-token-transfer">6.3 SRC-10 Token Transfer<a class="headerlink" href="#63-src-10-token-transfer" title="Permanent link">&para;</a></h2>
<p>HTTP API:</p>
<div class="codehilite"><pre><span></span>wallet/transferasset
Description: Transfer token
demo: curl -X POST  http://127.0.0.1:8090/wallet/transferasset -d &#39;{&quot;owner_address&quot;:&quot;41d1e7a6bc354106cb410e65ff8b181c600ff14292&quot;, &quot;to_address&quot;: &quot;41e552f6487585c2b58bc2c9bb4492bc1f17132cd0&quot;, &quot;asset_name&quot;: &quot;31303030303031&quot;, &quot;amount&quot;: 100}&#39;
Parameter owner_address: Owner address, default hexString
Parameter to_address: To address, default hexString
Parameter asset_name: Token id, default hexString
Parameter amount: Token transfer amount
Parameter permission_id: Optional, for multi-signature use
Return: Transaction object
Note: The unit of &#39;amount&#39; is the smallest unit of the token
</pre></div>


<h1 id="7-resource-model">7. Resource Model<a class="headerlink" href="#7-resource-model" title="Permanent link">&para;</a></h1>
<h2 id="71-resource-model-introduction">7.1 Resource Model Introduction<a class="headerlink" href="#71-resource-model-introduction" title="Permanent link">&para;</a></h2>
<p>STABILA network has 4 types of resources: Bandwidth, CPU, Storage and RAM. Benefit by STABILA's exclusive RAM model, STABILA's RAM resource is almost infinite.</p>
<p>STABILA network imports two resource conceptions: Bandwidth points and Ucr. Bandwidth Point represents Bandwidth, Ucr represents CPU and Storage.</p>
<p>Note:
- Ordinary transaction only consumes Bandwidth points
- Smart contract related transaction not only consumes Bandwidth points, but also Ucr</p>
<h2 id="72-bandwidth-points">7.2 Bandwidth Points<a class="headerlink" href="#72-bandwidth-points" title="Permanent link">&para;</a></h2>
<p>The transaction information is stored and transmitted in the form of byte array, Bandwidth Points consumed = the number of bytes of the transaction * Bandwidth Points rate. Currently Bandwidth Points rate = 1</p>
<p>Such as if the number of bytes of a transaction is 200, so this transaction consumes 200 Bandwidth Points.</p>
<p>Note: Due to the change of the total amount of the staked STB in the network and the self-staked STB amount, the Bandwidth Points an account possesses is not fixed.</p>
<h2 id="721-how-to-get-bandwidth-points">7.2.1 How to Get Bandwidth Points<a class="headerlink" href="#721-how-to-get-bandwidth-points" title="Permanent link">&para;</a></h2>
<p>1.&nbsp;By staking STB to get Bandwidth Points, Bandwidth Points = the amount of STB self-staked / the total amount of STB staked for Bandwidth Points in the network * 43_200_000_000</p>
<p>2.&nbsp;Every account has a fixed amount of free Bandwidth Points every day, it is defined in #61 network parameter, user can check the value on stabilascan(https://stabilascan.org/representatives).</p>
<h3 id="722-bandwidth-points-consumption">7.2.2 Bandwidth Points Consumption<a class="headerlink" href="#722-bandwidth-points-consumption" title="Permanent link">&para;</a></h3>
<p>Transactions other than queries consume Bandwidth points.</p>
<p>A special scenario: When transferring STB or SRC-10 tokens to an account that does not yet exist, this procedure creates the account prior to the transfer.</p>
<p>To create an account, a flat charge of 1 STB is required. If there are insufficient Bandwidth points obtained by STB staking, an additional 0.1 STB will be spent.</p>
<p>Bandwidth points consumption sequence for SRC-10 transfer:</p>
<ol>
<li>
<p>Free Bandwidth points.</p>
</li>
<li>
<p>SRC-10 issuer's Bandwidth points(if possible.)</p>
</li>
<li>
<p>Bandwidth points STB staking.</p>
</li>
<li>
<p>Bandwidth points obtained by STB burning, the rate = the number of bytes of the transaction * 1_000 UNIT;</p>
</li>
</ol>
<p>Bandwidth points consumption sequence for other transactions:</p>
<ol>
<li>
<p>Free Bandwidth points.</p>
</li>
<li>
<p>Bandwidth points STB staking.</p>
</li>
<li>
<p>Bandwidth points obtained by STB burning, the rate = the number of bytes of the transaction * 1_000 UNIT;</p>
</li>
</ol>
<h3 id="723-bandwidth-points-recovery">7.2.3 Bandwidth Points Recovery<a class="headerlink" href="#723-bandwidth-points-recovery" title="Permanent link">&para;</a></h3>
<p>Every 24 hours, the amount of the usage of Bandwidth points of an account will be reset to 0.</p>
<h2 id="73-ucr">7.3 Ucr<a class="headerlink" href="#73-ucr" title="Permanent link">&para;</a></h2>
<p><a href="#5.3-ucr-introduction">5.3 Ucr Introduction</a></p>
<h2 id="74-resource-delegation">7.4 Resource Delegation<a class="headerlink" href="#74-resource-delegation" title="Permanent link">&para;</a></h2>
<p>In STABILA network, an account can stake STB for Bandwidth or Ucr for other accounts. The primary account owns the staked STB and STABILA power, the recipient account owns the Bandwidth or Ucr. Like ordinary staking, resource delegation staking is also at least 3 days.</p>
<ul>
<li>Example(Using wallet-cli)</li>
</ul>
<div class="codehilite"><pre><span></span>cdBalance cded_balance cded_duration [ResourceCode:0 BANDWIDTH,1 UCR] [receiverAddress]

cded_balance: the amount of STB to stake (unit UNIT)
cded_duration: the staking period (currently a fixed 3 days)
ResourceCode: 0 for Bandwidth, 1 for Ucr
receiverAddress: recipient account address
</pre></div>


<h2 id="75-other-fees">7.5 Other Fees<a class="headerlink" href="#75-other-fees" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="center">Fee</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Create a executive</td>
<td align="center">9999 STB</td>
</tr>
<tr>
<td align="left">Issue a SRC-10 token</td>
<td align="center">1024 STB</td>
</tr>
<tr>
<td align="left">Create an account</td>
<td align="center">1 STB</td>
</tr>
<tr>
<td align="left">Create an exchange</td>
<td align="center">1024 STB</td>
</tr>
</tbody>
</table>
<h1 id="8-wallet-introduction">8. Wallet Introduction<a class="headerlink" href="#8-wallet-introduction" title="Permanent link">&para;</a></h1>
<h2 id="81-wallet-cli-introduction">8.1 wallet-cli Introduction<a class="headerlink" href="#81-wallet-cli-introduction" title="Permanent link">&para;</a></h2>
<p>Please refer to:
<a href="https://github.com/stabilaprotocol/wallet-cli/blob/master/README.md">https://github.com/stabilaprotocol/wallet-cli/blob/master/README.md</a></p>
<h2 id="82-get-transaction-id">8.2 Get Transaction ID<a class="headerlink" href="#82-get-transaction-id" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>Hash.sha256(transaction.getRawData().toByteArray())
</pre></div>


<h2 id="83-get-block-id">8.3 Get Block ID<a class="headerlink" href="#83-get-block-id" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>private byte[] generateBlockId(long blockNum, byte[] blockHash) {
  byte[] numBytes = Longs.toByteArray(blockNum);
  byte[] hash = blockHash;
  System.arraycopy(numBytes, 0, hash, 0, 8);
  return hash;
 }
</pre></div>


<h2 id="84-how-to-build-a-transaction-locally">8.4 How to Build a Transaction Locally<a class="headerlink" href="#84-how-to-build-a-transaction-locally" title="Permanent link">&para;</a></h2>
<p>According to the definition of the transaction, you need to fill up all the fields of the transaction.</p>
<p>You need to set reference block and expiration time information, so you need to connect to the Mainnet. We recommend to use the latest block on fullnode as the value of reference block, use the latest block time plus N minutes as the value of expiration time.</p>
<p>The network judgment condition is if (expiration &gt; latest block time and expiration &lt; latest block time + 24 hours) means the transaction is in period of validity. Otherwise, it will be an overdue transaction, will not be accepted by the Mainnet.</p>
<p>Way to set reference block: set RefBlockHash the bytes from the 8 to 16(not included) of the hash of the latest block, set BlockBytes the bytes from 6 to 8(not included) of the height of the latest block.</p>
<div class="codehilite"><pre><span></span>public static Transaction setReference(Transaction transaction, Block newestBlock) {
     long blockHeight = newestBlock.getBlockHeader().getRawData().getNumber();
     byte[] blockHash = getBlockHash(newestBlock).getBytes();
     byte[] refBlockNum = ByteArray.fromLong(blockHeight);
     Transaction.raw rawData = transaction.getRawData().toBuilder()
         .setRefBlockHash(ByteString.copyFrom(ByteArray.subArray(blockHash, 8, 16)))
         .setRefBlockBytes(ByteString.copyFrom(ByteArray.subArray(refBlockNum, 6, 8)))
         .build();
     return transaction.toBuilder().setRawData(rawData).build();
   }
</pre></div>


<p>Way to set expiration time and transaction timestamp:</p>
<div class="codehilite"><pre><span></span>public static Transaction createTransaction(byte[] from, byte[] to, long amount) {
     Transaction.Builder transactionBuilder = Transaction.newBuilder();
     Block newestBlock = WalletClient.getBlock(-1);

     Transaction.Contract.Builder contractBuilder = Transaction.Contract.newBuilder();
     Contract.TransferContract.Builder transferContractBuilder = Contract.TransferContract
         .newBuilder();
     transferContractBuilder.setAmount(amount);
     ByteString bsTo = ByteString.copyFrom(to);
     ByteString bsOwner = ByteString.copyFrom(from);
     transferContractBuilder.setToAddress(bsTo);
     transferContractBuilder.setOwnerAddress(bsOwner);
     try {
       Any any = Any.pack(transferContractBuilder.build());
       contractBuilder.setParameter(any);
     } catch (Exception e) {
       return null;
     }
     contractBuilder.setType(Transaction.Contract.ContractType.TransferContract);
     transactionBuilder.getRawDataBuilder().addContract(contractBuilder)
         .setTimestamp(System.currentTimeMillis()) //in the form of millisecond
         .setExpiration(newestBlock.getBlockHeader().getRawData().getTimestamp() + 10 * 60 * 60 * 1000);
     Transaction transaction = transactionBuilder.build();
     Transaction refTransaction = setReference(transaction, newestBlock);
     return refTransaction;
   }
</pre></div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../api/http/" class="btn btn-neutral float-right" title="HTTP API">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dpos/" class="btn btn-neutral" title="DPoS"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/stabilaprotocol/documentation-en/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../dpos/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../api/http/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
